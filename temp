import RPi.GPIO as GPIO
from time import sleep

# Pin Definitions
DIR_PIN = 24  # GPIO pin connected to DIR on EasyDriver
STEP_PIN = 23  # GPIO pin connected to STEP on EasyDriver

# Motor Movement Parameters
STEP_DELAY = 0.01  # Time delay between steps (seconds)
STEPS = 200  # Number of steps to move

# GPIO Setup
GPIO.setmode(GPIO.BCM)  # Use BCM pin numbering
GPIO.setup(DIR_PIN, GPIO.OUT)
GPIO.setup(STEP_PIN, GPIO.OUT)

try:
    # Set Direction (1 for clockwise, 0 for counterclockwise)
    GPIO.output(DIR_PIN, GPIO.HIGH)  # Change to GPIO.LOW for reverse direction

    print("Moving motor...")
    for _ in range(STEPS):
        # Pulse the STEP pin
        GPIO.output(STEP_PIN, GPIO.HIGH)
        sleep(STEP_DELAY)
        GPIO.output(STEP_PIN, GPIO.LOW)
        sleep(STEP_DELAY)

    print("Motor movement complete!")

except KeyboardInterrupt:
    print("Test interrupted by user.")

finally:
    # Cleanup GPIO settings
    GPIO.cleanup()